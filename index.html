<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Doug's Dabblings &middot; Quick thoughts on stuff I'm playing with
    
  </title>

  
  <link rel="canonical" href="/">
  

  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <!-- font awesome -->
  <script src="https://kit.fontawesome.com/89f4c31870.js" crossorigin="anonymous"></script>
</head>


  <body class="theme-base-0d">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A collection of thoughts on things in my life that I'm experiencing, playing with, or suffering through. Mostly tech related, but sometimes not.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

    <a class="sidebar-nav-item " href="/posts/">All Posts</a>
    <a class="sidebar-nav-item " href="/tags/">All Tags</a>
  </nav>

  <div class="sidebar-item">
      <a href="https://www.deviantart.com/dhunley"><i class="fab fa-deviantart"></i></a>
    <a href="mailto:%64%6F%75%67.%68%75%6E%6C%65%79@%67%6D%61%69%6C.%63%6F%6D"><i class="fas fa-envelope"></i></a>
      <a href="https://github.com/hunleyd"><i class="fab fa-github"></i></a>
      <a href="https://instagram.com/doughunley"><i class="fab fa-instagram-square"></i></a>
      <a href="https://last.fm/user/hunleyd"><i class="fab fa-lastfm-square"></i></a>
      <a href="https://www.linkedin.com/in/dhunley"><i class="fab fa-linkedin"></i></a>
      <a href="https://www.meetup.com/members/43608152/"><i class="fab fa-meetup"></i></a>
      <a href="https://reddit.com/u/hunleyd"><i class="fab fa-reddit-square"></i></a>
      <a href="https://https://open.spotify.com/user/z0emrjhe6h1bieo81fkrmdbqq"><i class="fab fa-spotify"></i></a>
      <a href="https://twitter.com/hunleyd"><i class="fab fa-twitter-square"></i></a>
      <a href="https://youtube.com/c/DouglasHunley"><i class="fab fa-youtube"></i></a>
    <p></p>
    <p>
      <a href="/atom.xml"><i class="fas fa-rss-square"></i></a>
    </p>
    <p></p>
    <p>
      &copy; 2021. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Doug's Dabblings</a>
            <small>Quick thoughts on stuff I'm playing with</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2021/08/25/I-said-brr-it-s-cold-in-here/">
        I said brr it's cold in here
      </a>
    </h1>

    <span class="post-date">25 Aug 2021</span>

    <p>I don’t like the heat. I hate being hot. Always have. I’m the guy who will
leave the windows open when others have already turned on the furnace. And
I used to be guy who ran the AC all the time and ran it at a very low temp.
Recently though, I’ve come to realize that as long as it’s colder in here than
it is out there, it’s all good. However, the delta has be more than just a few
degrees. And I need the fan on.</p>

<center><img src="https://c.tenor.com/_WTiGlJeiUQAAAAC/brrr-cold.gif" /></center>

<p>So, with this realization, I set about configuring my Home Assistant to
constantly tweak the AC so that it’s 10 degrees cooler inside than outside (if
I’m home). To accomplish this, I use the temperature as reported by
<a href="https://www.weatherbit.io/">Weatherbit.io</a> which I integrated via
<a href="https://hacs.xyz/">HACS</a>’s
<a href="https://github.com/briis/weatherbit">integration</a>. I already had my
<a href="https://www.home-assistant.io/integrations/nest/">Nest</a> integrated, and could
have used its outdoor temperature sensor, but I found it slower to update than
Weatherbit.</p>

<p>The automation is actually really simple. In fact, it’s a little too simple in
that I completely forgot to account for when I’m sleeping. You see, as much as
I don’t like the heat, I literally cannot sleep if I’m hot. And for whatever
reason, I put off heat while I sleep, so the room has to be straight up <em>cold</em>
for me to even have a chance of resting well. So I <em>quickly</em> realized that
I need to check what time it is and if its late set the temp low and stop
adjusting it until I get up in the morning. Which brings me to my binary
sensor:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">tod</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">Daytime</span>
  <span class="na">after</span><span class="pi">:</span> <span class="s2">"</span><span class="s">08:00"</span>
  <span class="na">before</span><span class="pi">:</span> <span class="s2">"</span><span class="s">23:00"</span>
</code></pre></div></div>

<p>As you can see, I’ve defined ‘daytime’ as between 0800 and 2300.</p>

<p>So my automation looks like:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">alias</span><span class="pi">:</span> <span class="s">Adjust the AC</span>
  <span class="na">id</span><span class="pi">:</span> <span class="s1">'</span><span class="s">1625265017'</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Keep</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">10</span><span class="nv"> </span><span class="s">degrees</span><span class="nv"> </span><span class="s">cooler</span><span class="nv"> </span><span class="s">inside</span><span class="nv"> </span><span class="s">(but</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">least</span><span class="nv"> </span><span class="s">72);</span><span class="nv"> </span><span class="s">keep</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">68</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">night'</span>
  <span class="na">trigger</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">sensor.weatherbit_temperature</span>
  <span class="na">condition</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">condition</span><span class="pi">:</span> <span class="s">state</span>
      <span class="na">entity_id</span><span class="pi">:</span> <span class="s">climate.living_room</span>
      <span class="na">state</span><span class="pi">:</span> <span class="s1">'</span><span class="s">cool'</span>
  <span class="na">action</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">service</span><span class="pi">:</span> <span class="s">climate.set_temperature</span>
      <span class="na">target</span><span class="pi">:</span>
        <span class="na">entity_id</span><span class="pi">:</span> <span class="s">climate.living_room</span>
      <span class="na">data_template</span><span class="pi">:</span>
        <span class="na">temperature</span><span class="pi">:</span> <span class="pi">&gt;-</span>
          <span class="s">{%- if states('binary_sensor.daytime') == 'on' -%}</span>
            <span class="s">{%- if states('sensor.weatherbit_temperature')|int - 10 &gt; 71 -%}</span>
              <span class="s">{{ states('sensor.weatherbit_temperature')|int - 10 }}</span>
            <span class="s">{%- else -%}</span>
              <span class="s">72</span>
            <span class="s">{%- endif -%}</span>
          <span class="s">{%- else -%}</span>
            <span class="s">68</span>
          <span class="s">{%- endif -%}</span>
  <span class="na">mode</span><span class="pi">:</span> <span class="s">single</span>
</code></pre></div></div>

<p>Essentially, every time the temperature (as reported by Weatherbit) changes,
this automation kicks off. It checks if the Nest is set to ‘cool’ mode
(which means the AC is on and also means I’m home as another automation sets
the Nest to ‘off’ when I leave) and then it checks if its ‘daytime’ or not. If
it is, it subtracts 10 from the reported outside temp, checks if that value is
greater than 71 degrees and if so, sets the AC to that target temp. If the
result is less than or equal to 72, it sets the target temp to 72. Unless it’s
not ‘daytime’ in which case it sets it to 68 (my preferred sleeping temp).</p>

<p>It’s trivial, but it’s very powerful. And its saved me some money already,
which is always nice.</p>


  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
